# [“药急送“网上买药系统设计文档]

## 总体结构设计

为了建立目标系统的总体结构，可按照软件需求划分子系统，定义每个子系统的功能模块以及它们之间的关系，并描述相关接口及页面。
根据“药急送”系统的实际需求，其使用者包含两类：顾客、药店管理员。系统分为：前端、后台。顾客通过前端界面实现浏览药店、药品信息，
添加药品至购物车、购买药品、确认收货等操作；药店管理员通过另一前端界面实现浏览药品信息、修改药品信息、查看订单等操作；
系统后台主要包含数据库，该数据库存储量用户信息、药品信息、订单信息等；
另外，第三方支付系统通过一个接口与系统后台相关联，实现顾客付款，药店收款功能。

### 药急送”系统功能结构图

![image](https://github.com/SunflowerPKU/OO/blob/master/pic/系统功能结构图.jpg)

### 顾客流程图

![image](https://github.com/SunflowerPKU/OO/blob/master/pic/顾客流程图.jpg)

## 数据结构设计

###主要类
包含顾客、药店管理员、药品、订单、快递公司、系统管理员这几个主要类。
1）顾客（编号、名字、密码、联系方式、地址、账户）
2）药店管理员（编号、名字、密码、联系方式、地址、账户、信誉）
3）药品（编号、名称、价格、描述、生产日期、库存、所属药店编号）
4）订单（客户编号、药品编号、药店编号、订单时间、数量、地址、状态）
6）快递公司（编号、名称、联系方式、订单号、快递员列表）
5）管理员（编号、名字）

##主要模块的设计与实现

###数据库访问接口实现（工厂模式）

由于无论使用哪种数据库平台进行数据访问，都需使用到Connect、Command、DataReader和 DataAdapter这四种类型的对象。
因此，可以考虑工厂模式，实现数据库访问接口对不同类型数据库的访问。

![image](https://github.com/SunflowerPKU/OO/blob/master/pic/工厂模式.png)

###消息通知（观察者模式）

顾客所关注的药店可以向顾客推送相关消息通知，在观察者模式中，可以把顾客和药店定义为1:N的关系，每一个药店管理员都实现了Subject接口，
当有顾客对某家药店感兴趣时，该药店的管理员调用addObsever() 方法，addObsever() 不再关注该药店，notify() 实现消息的群发，update() 实现药店对信息的更新。

![image](https://github.com/SunflowerPKU/OO/blob/master/pic/观察者模式.png)

###界面设计

网站采用了传统的购物平台的网站模式，用户登陆界面在首页中出现，让用户能方便即时地登录网站，页面还包含了搜索模块，使用户随时可以搜索自己感兴趣的药品。
购物车存储采用数据库方式实现。订单供用户查看已经订购的药品，包含订单号、药品信息、地址信息、发货方信息等。

##数据库表结构设计

### 顾客信息表

| 字段名  | 类型  | 长度 |含义 |
| ----- | ------|-------|------- |
| ID  | Int | 4 | 主键、用户标识 |
| UserName  | String | 6 | 用户名 |
| Password  | String | 6 | 密码 |
| Contact  | Char | 18 | 联系方式 |
| Address  | String | 6 | 地址 |
| Account  | Char | 20 | 账户 |                

### 药店管理员信息表

| 字段名  | 类型  | 长度 |含义 |
| ----- | ------|-------|------- |
| S_ID  | Int | 4 | 主键、用户标识 |
| S_UserName  | String | 6 | 用户名 |
| S_Password  | String | 6 | 密码 |
| S_Contact  | Char | 18 | 联系方式 |
| S_Address  | String | 6 | 地址 |
| S_Account  | Char | 20 | 账户 |                

### 药品信息表

| 字段名  | 类型  | 长度 |含义 |
| ----- | ------|-------|------- |
| M_ID  | Int | 4 | 主键、用户标识 |
| M_Name  | String | 6 | 药品名 |
| Price  | Float | 8 | 价格 |
| Description  | String | 6 | 药品说明 |
| Date  | Date | ... | 生产日期 |
| NumofStock  | Int | 6 | 库存 |    

### 订单表

| 字段名  | 类型  | 长度 |含义 |
| ----- | ------|-------|------- |
| B_ID  | Int | 4 | 主键、用户标识 |
| B_User  | String | 6 | 用户名 |
| B_Item  | Medicine | ... | 药品信息 |
| B_Contact  | Char | 18 | 联系方式 |
| B_Address  | String | 6 | 送货地址 |
| B_Price  | Float | 8 | 总价 |  


## 系统配置

1）处理器：Intel Core i5  
2) 内存：4MB  
3) 硬盘：100GB  
4）操作系统：Window 2010/2007…  
5）数据库：Microsoft SQL Server 2010

